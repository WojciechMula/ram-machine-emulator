<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="pl">
<head>
	<meta http-equiv="Content-type"     content="text/html;charset=iso-8859-2">
	<meta http-equiv="Content-language" content="pl">

	<meta name="Description" content="emulator maszyny RAM">
	<meta name="Keywords"    content="maszyna RAM, emulator">
	<meta name="Author"      content="Wojciech Mu³a">
	<meta name="Generator"   content="med, nedit, vim">
	<link rel="stylesheet" href="style.css" type="text/css">
	<title>Emulator maszyny RAM - wersja konsolowa</title>
</head>
<body>

<a href="../index.html">strona g³ówna</a>

<hr>

<h1>Emulator maszyny RAM - wersja konsolowa</h1>

<div class="para">
<p>Emulator maszyny RAM w wersji konsolowej zosta³ napisany w jêzyku <a href="http://www.python.org">Python</a>; wersja interpretera na której powsta³ to&nbsp;2.2.1, niestety programy nie by³ testowany na ¿adnych wcze¶niejszych wesjach.
<p>Wersja konsolowa, w przeciwieñstwie do wersji JavaScript-owej, nie posiada ograniczeñ co do ilo¶ci rejestrów, ani zakresu liczb przechowywanych w rejestrach.
<p>Kod programu dla maszyny RAM musi zostaæ zapisany w pliku tekstowym. Podczas wykonywania kodu emulator wypisuje linijkê z pliku (poprzedzaj±c j± numerem) w której znajduje siê instrukcja któr± wykona³, oraz, w nastêpnej linii, zawarto¶æ rejestrów. Wy¶wietlane s± tylko te rejestry, do których choæ raz odwo³ano siê w programie; zawsze wy¶wietalny jest akumulator. Gdy program siê zakoñczy, wypisywana jest zawarto¶æ ta¶m - kolejno - wej¶ciowej i wyj¶ciowej.
<p>Gdy emulator napotka instrukcjê <tt>read</tt> prosi u¿ytkownika o wpisanie warto¶ci, która znajduje siê na ta¶mie wej¶ciowej.
<p>Do dzia³ania potrzebne s± nastêpuj±ce pliki:
<ul>
	<li><a href="main.py">main.py</a> - g³ówny program,
	<li><a href="compiler.py">compiler.py</a> - kompilator,
	<li><a href="emulator.py">emulator.py</a> - emulator.
</ul>

<p>Wywo³anie programu jest nastêpuj±ce (<tt>$</tt> - znak zachêty interpretera poleceñ):
<pre>
$ python2 main.py --file=<i>¼ród³o programu</i>
</pre>

<p>Przyk³adowy wynik pracy programu dla funkcji obliczaj±cej silniê (program znajduje siê w¶ród <a href="examples.html">przyk³adów</a>).

<pre>
$ python2 main.py --file=factorial.txt
Parsing factorial.txt file...
16: 	read  1         # r1 = n
<b>read: 4</b>
r0=0 r1=4 
18: 	load =0         #
r0=0 r1=4 
19: 	sub   1         #
r0=-4 r1=4 
20: 	jgtz  negative  # n &lt; 0?
r0=-4 r1=4 
22: 	load =1         # r2 = res = 1
r0=1 r1=4 
23: 	store 2         #
r0=1 r1=4 r2=1 
25: 	load  1
r0=4 r1=4 r2=1 
26: while:
r0=4 r1=4 r2=1 
27: 	jzero endwhile
r0=4 r1=4 r2=1 
28: 	mult  2
r0=4 r1=4 r2=1 
29: 	store 2         # res = res * n
r0=4 r1=4 r2=4 
31: 	load  1
r0=4 r1=4 r2=4 
32: 	sub  =1
r0=3 r1=4 r2=4 
33: 	store 1         # n = n-1
r0=3 r1=3 r2=4 
34: 	jump while
r0=3 r1=3 r2=4 
26: while:
r0=3 r1=3 r2=4 
27: 	jzero endwhile
r0=3 r1=3 r2=4 
28: 	mult  2
r0=12 r1=3 r2=4 
29: 	store 2         # res = res * n
r0=12 r1=3 r2=12 
31: 	load  1
r0=3 r1=3 r2=12 
32: 	sub  =1
r0=2 r1=3 r2=12 
33: 	store 1         # n = n-1
r0=2 r1=2 r2=12 
34: 	jump while
r0=2 r1=2 r2=12 
26: while:
r0=2 r1=2 r2=12 
27: 	jzero endwhile
r0=2 r1=2 r2=12 
28: 	mult  2
r0=24 r1=2 r2=12 
29: 	store 2         # res = res * n
r0=24 r1=2 r2=24 
31: 	load  1
r0=2 r1=2 r2=24 
32: 	sub  =1
r0=1 r1=2 r2=24 
33: 	store 1         # n = n-1
r0=1 r1=1 r2=24 
34: 	jump while
r0=1 r1=1 r2=24 
26: while:
r0=1 r1=1 r2=24 
27: 	jzero endwhile
r0=1 r1=1 r2=24 
28: 	mult  2
r0=24 r1=1 r2=24 
29: 	store 2         # res = res * n
r0=24 r1=1 r2=24 
31: 	load  1
r0=1 r1=1 r2=24 
32: 	sub  =1
r0=0 r1=1 r2=24 
33: 	store 1         # n = n-1
r0=0 r1=0 r2=24 
34: 	jump while
r0=0 r1=0 r2=24 
26: while:
r0=0 r1=0 r2=24 
27: 	jzero endwhile
r0=0 r1=0 r2=24 
36: endwhile:
r0=0 r1=0 r2=24 
37: 	write 2         # return
r0=0 r1=0 r2=24 
38: negative:
r0=0 r1=0 r2=24 
39: 	halt
r0=0 r1=0 r2=24 
input tape : [4]
output tape: [24]
</pre>
</div>
<hr>

</body>
</html>

