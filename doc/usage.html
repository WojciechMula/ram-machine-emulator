<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="pl">
<head>
	<meta http-equiv="Content-type"     content="text/html;charset=iso-8859-2">
	<meta http-equiv="Content-language" content="pl">

	<meta name="Description" content="emulator maszyny RAM">
	<meta name="Keywords"    content="maszyna RAM, emulator">
	<meta name="Author"      content="Wojciech Mu³a">
	<meta name="Generator"   content="med, nedit, vim">
	<link rel="stylesheet" href="style.css" type="text/css">
	<title>Emulator maszyny RAM - obs³uga skryptu</title>
</head>
<body>

<a href="../index.html">Spis tre¶ci</a>
<hr>

<h1>Spis tre¶ci</h1>

<ul>
	<li><a href="#p61">Konsola tekstowa</a>
	<li><a href="#p62">Edytor i kompilator</a>
	<li><a href="#p63">Emulator</a>
	<ul>
		<li><a href="#p631">Maszyna</a>
		<li><a href="#p632">Rejestry</a>
		<li><a href="#p633">Ta¶ma wej¶ciowa</a>
		<li><a href="#p634">Ta¶ma wyj¶ciowa</a>
	</ul>
</ul>

<h1>Obs³uga skryptu</h1>

<div class="para">

<p>Ekran zosta³ podzielony na trzy czê¶ci:

<ul>
	<li>Edytor + kompilator
	<li>Konsola tekstowa
	<li>Interfejs emulatora
</ul>

<p>W dalszym opisie pozwolê sobie pomin±æ rzeczy oczywiste (np. do czego s³u¿y przycisk <q>wyczy¶æ konsolê</q>), by nie obra¿aæ inteligencji szanownego czytelnika.

<a name="p61"></a>
<h2>Konsola tekstowa</h2>

<center>
<img src="2.png" alt="Konsola tekstowa">
</center>

<p>Konsola tekstowa jest u¿ywana przez kompilator i emulator do wypisywania komunikatów; komunikaty zosta³y podzielone na trzy klasy:

<dl>
	<dt><strong>B³êdy</strong></dt>
	<dd>Uniemo¿liwiaj± dalsze funkcjonowanie kompilatora (b³êdy sk³adniowe, powtórzenie etykiet) lub emulatora (dzielenie przez zero, ujemna warto¶æ w adresowaniu po¶rednim).</dd>

	<dt><strong>Ostrze¿enia</strong></dt>
	<dd>Informacje o istotnych rzeczach, np. brak instrukcji <code>halt</code>, definicja etykiety do której nie ma odwo³ania w programie.</dd>

	<dt><strong>Informacje</strong></dt>
	<dd></dd>
</dl>

<p>Komunikaty mo¿na przekierowaæ zarówno do okienka tekstowego, jak równie¿ do wyskakuj±cego okienka. Dla ka¿dej z wy¿ej wymienionych klas istnieje mo¿liwo¶æ wyboru sposobu prezentacji, s³u¿± do tego prze³±czniki <q>na konsole</q> oraz <q>do okienka</q>.

<a name="p62"></a>
<h2>Edytor i kompilator</h2>

<center>
<img src="1.png" alt="Edytor i kompilator">
</center>

<p>Kompilator odczytuje tekst ¼ród³owy programu z okienka tekstowego.  Przycisk <q>kompilacja</q> inicjuje kompilacjê. Je¶li przesz³a ona bezb³êdnie, to w³±czany jest tryb emulacji: mo¿liwo¶æ edycji/kompilacji zostaje zablokowana, w³±czany jest interfejs emulatora.

<a name="p63"></a>
<h2>Emulator</h2>

<center>
<img src="3.png" alt="Emulator">
</center>

<p>Interfejs emulatora zosta³ podzielony na cztery czê¶ci: Maszyna, Rejestry, Ta¶ma wej¶ciowa, Ta¶ma wyj¶ciowa.

<a name="p631"></a>
<h3>Maszyna</h3>

<p>Naci¶niêcie przycisku <q>wykonaj instrukcjê</q> powoduje wykonanie bie¿±cej instrukcji. W okienku znajduj±cym siê poni¿ej wy¶wietlane s± trzy kolejne linie kodu, bie¿±ca instrukcja jest oznaczona przez <code>=&gt;</code>. Wszystkie linie s± poprzedzone <strong>fizycznym</strong> numerem linii (maksymalnie 3-cyfrowym), niezale¿nie od tego czy w kodzie wystêpuje numer linii, czy nie. Mo¿e to wygl±daæ np. tak:

<pre>
    5: add   0  # r0 *= 2
=&gt;  6: add   5
    7: read  1
</pre>

<p>Naci¶niêcie przycisku <q>reset</q> powoduje wyzerowanie rejestrów i przej¶cie na pocz±tek programu. Zawarto¶æ ta¶m nie jest zmieniana.
<p>Naci¶niêcie przycisku <q>stop</q> powoduje zakoñczenie trybu emulacji i przej¶cie w tryb edycji.

<a name="p632"></a>
<h3>Rejestry</h3>

<p>W polu tekstowym wy¶wietlane s± warto¶ci obserwowanych rejestrów.
<p>Naci¶niêcie przycisku <q>obserwuj rejestry...</q> (ang. <i>watch</i>) powoduje wy¶wietlenie okienka, w którym mo¿na wpisaæ listê wyra¿eñ (wyra¿enia oddziela siê spacj±/spacjami); <strong>zawsze</strong> na pocz±tku wy¶wietlany jest akumulator. Wszystkie b³êdnie zapisane wyra¿enia s± ignorowane.

<div align="center" style="margin-top: 1em; margin-bottom: 1em">
<table class="full" cellspacing="1">
<tbody>
	<tr style="text-align: center; font-weight: bold">
		<td rowspan="2">wyra¿enie
		<td colspan="2">wy¶wietlany tekst<br>pole <q>wy¶wietl numery rejestrów</q>:

	<tr style="text-align: center; font-weight: bold">
		<td>wy³±czone
		<td>w³±czone

	<tr>
		<td>&nbsp;
		<td><code>r0=xxx</code>
		<td><code>r0=xxx</code>
	<tr>
		<td colspan="3" style="font-weight: bold">numer rejestru
	<tr>
		<td><i>numer</i>
		<td><code>r0=xxx r<i>numer</i>=yyy</code>
		<td><code>r0=xxx r<i>numer</i>=yyy</code>

	<tr>
		<td colspan="3" style="font-weight: bold">nazwany rejestr
	<tr>
		<td><i>nazwa</i>=<i>numer</i>
		<td><code>r0=xxx <i>nazwa</i>=yyy</code>
		<td><code>r0=xxx <i>nazwa</i>(<i>numer</i>)=yyy</code>

	<tr>
		<td colspan="3" style="font-weight: bold">tablica (zakres rejestrów)
	<tr>
		<td><i>lo</i>:<i>hi</i>
		<td><code>r0=xxx a[<i>lo</i>:<i>hi</i>]=[yyy,zzz,...,vvv]</code>
		<td><code>r0=xxx a[<i>lo</i>:<i>hi</i>]=[yyy,zzz,...,vvv]</code>

	<tr>
		<td colspan="3" style="font-weight: bold">nazwana tablica
	<tr>
		<td><i>tablica</i>=<i>lo</i>:<i>hi</i>
		<td><code>r0=xxx <i>tablica</i>=[yyy,zzz,...,vvv]</code>
		<td><code>r0=xxx <i>tablica</i>[<i>lo</i>:<i>hi</i>]=[yyy,zzz,...,vvv]</code>
</tbody>
</table>

</div>

<p>Oto do¶æ rozbudowany przyk³ad. Niech rejestry maj± nastêpuj±ce warto¶ci:

<pre>
r0=777, r1=111, r2=222, r3=333, r4=-5, r5=-6, r6=-7, r7=12, r8=13
</pre>

<p>Wyra¿enie wpisane do okienka ma nastêpuj±c± postaæ

<pre>
2 3 n=0 zmienna=7 8 tab=4:6 0:4 tab2=5
</pre>

a zostanie wy¶wietlone tak (pole <q>wy¶wietl numery rejestrów</q> wy³±czone)

<pre>
r2=222 r3=333 n=777 zmienna=12 r8=13 tab=[-5,-6,-7] a[0:4]=[777,111,222,333,-5] tab2=-6
</pre>

<a name="p633"></a>
<h3>Ta¶ma wej¶ciowa</h3>

<p>Naci¶niêcie przycisku <q>dopisz do ta¶my...</q> powoduje wy¶wietlenie okienka, w którym mo¿na wpisaæ kolejne liczby (oddzielone spacjami lub przecinkami) - zostan± one dopisane do ta¶my. Innym sposobem dodania nowych warto¶ci do ta¶my jest naci¶niêcie przycisku <q>wylosuj</q> - do ta¶my dopisywana jest liczba wylosowana z przedzia³u okre¶lonego w polach obok (domy¶lnie jest to przedzia³ od 0 do 100).
<p>W okienku poni¿ej wy¶wietlana jest zawarto¶æ ta¶my wej¶ciowej - pierwsza liczba od lewej jest t±, która zostanie odczytana przy nastêpnym wywo³aniu instrukcji <code>read</code>. Próba odczytu z pustej ta¶my nie koñczy siê b³êdem - do ta¶my dopisywana jest przypadkowa warto¶æ.
<p>Nie ma mo¿liwo¶ci przewijania widoku ta¶my, je¶li wiêc trzeba zobaczyæ jej zawarto¶æ, mo¿na nacisn±æ przycisk <q>na konsolê</q>. Spowoduje to wypisanie wszystkich elementów ta¶my na konsolê. 

<a name="p634"></a>
<h3>Ta¶ma wyj¶ciowa</h3>

<p>Ostatnia liczba z prawej jest ostatnio zapisan± przez rozkaz <code>write</code>.
<p>Podobnie jak dla ta¶my wej¶ciowej, tak i tu nie ma mo¿liwo¶ci przewijania widoku. Uwagi j.w.
</div>

<hr>

</body>
</html>

